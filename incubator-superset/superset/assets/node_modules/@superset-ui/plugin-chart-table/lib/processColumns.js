"use strict";exports.__esModule=!0,exports.default=processColumns;var _numberFormat=require("@superset-ui/number-format"),_timeFormat=require("@superset-ui/time-format");function _extends(){return _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},_extends.apply(this,arguments)}var DTTM_ALIAS="__timestamp";function processColumns(a){var b=a.columns,c=a.metrics,d=a.records,e=a.tableTimestampFormat,f=a.datasource,g=f.columnFormats,h=f.verboseMap,j={};c.forEach(function(a){for(var b=[],c=0;c<d.length;c+=1)b.push(d[c][a]);j[a]=b});for(var k={},l={},m=0;m<c.length;m+=1)k[c[m]]=Math.max.apply(Math,j[c[m]]),l[c[m]]=Math.min.apply(Math,j[c[m]]);var n=(0,_numberFormat.getNumberFormatter)(_numberFormat.NumberFormats.PERCENT_3_POINT),o=(0,_timeFormat.getTimeFormatter)(e),p=b.map(function(a){var b,d=h[a],e=g&&g[a],f="string";a===DTTM_ALIAS&&(b=o);var i={};// Handle verbose names for percents
if(0<=c.indexOf(a)&&(b=(0,_numberFormat.getNumberFormatter)(e),f="metric",i.maxValue=k[a],i.minValue=l[a]),!d)if(0<a.length&&"%"===a[0]){var j=a.substring(1);d="% "+(h[j]||j),b=n}else d=a;return _extends({format:b,key:a,label:d,type:f},i)});return p}